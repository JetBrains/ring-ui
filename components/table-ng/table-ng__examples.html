<example name="Table Ng">
  <file type="html">
    <div ng-app="test" ng-controller="tableExample as ctrl">
      <rg-table-toolbar stick>
        <div>Some toolbar content. Selected item:
          {{ctrl.selection.getActiveItem().name}}
        </div>
      </rg-table-toolbar>

      <rg-table items="ctrl.itemsArray" selection="ctrl.selection">
        <rg-table-header>
          <rg-table-title>Avatar</rg-table-title>
          <rg-table-title>Check</rg-table-title>
          <rg-table-title active>Name</rg-table-title>
          <rg-table-title>Groups</rg-table-title>
        </rg-table-header>

        <rg-table-row row-item="item" ng-repeat="item in ctrl.itemsArray">
          <rg-table-column avatar>
            <img ng-if="::item.iconUrl" ng-src="{{ ::item.iconUrl }}"
              class="ring-table__avatar__img"/>
          </rg-table-column>
          <rg-table-checkbox-cell></rg-table-checkbox-cell>
          <rg-table-column limited>{{ ::item.name }}</rg-table-column>
          <rg-table-column wide limited>
            <span class="ring-table__column-list"
              ng-repeat="subItem in ::item.subList">{{ ::subItem.name }}</span>
          </rg-table-column>
        </rg-table-row>
      </rg-table>
    </div>
  </file>
  <file type="js">
    require('angular');
    require('ring-ui/components/table-ng/table-ng');

    angular.module('test', ['Ring.table']).
      controller('tableExample', function ($scope) {
        var ctrl = this;

        ctrl.itemsArray = [{
          name: 'test1',
          subList: [{name: 'some group'}],
          iconUrl: 'https://d13yacurqjgara.cloudfront.net/users/317408/avatars/mini/Layout_Behance_Avatar_(1).jpg?1376382552'
        }];

        for (var i = 0; i < 20; i++) {
          ctrl.itemsArray.push({
            name: Math.random(),
            subList: [
              {name: Math.random()},
              {name: Math.random()},
              {name: Math.random()}
            ]
          });
        }

      });
  </file>
  <file name="index.scss">
    body {
      margin: 0;
    }
  </file>
</example>

<example name="Table Ng without selection">
  <file type="html">
    <div ng-app="Ring.table"
      ng-init="itemsArray = ['first', 'second', 'third', 'fourth']">
      <rg-table items="itemsArray" disable-selection="true">
        <rg-table-row row-item="item" ng-repeat="item in itemsArray">
          <rg-table-column>{{item}}</rg-table-column>
        </rg-table-row>
      </rg-table>
    </div>
  </file>
  <file type="js">
    require('angular');
    require('ring-ui/components/table-ng/table-ng');
  </file>
  <file name="index.scss">
    body {
      margin: 0;
    }
  </file>
</example>

<example name="Table Ng with sidebar">
  <file type="html">
    <h3>Scroll down to see the effect</h3>
    <div ng-app="test" ng-controller="tableExample as ctrl">
      <rg-sidebar show="ctrl.isShowSideBar"
        place-under-sibling=".some-toolbar"
        top-offset="1">
        <div class="ring-sidebar__title">Here is sidebar content</div>
        <div class="ring-sidebar__section">
          {{ctrl.selection.getActiveItem().name}}
        </div>
        <rg-select
          options="item.name for item in ctrl.itemsArray track by item.name"></rg-select>

        <div react="QueryAssist" ng-model="ctrl.query"
          x-data-source="ctrl.queryAssistSource(query, caret, omitSuggestions)"></div>
      </rg-sidebar>

      <rg-table-toolbar stick class="some-toolbar">
        <div>Some toolbar content. Selected
          item: {{ctrl.selection.getActiveItem().name}}
          <rg-sidebar-toggle-button model="ctrl.isShowSideBar">Toggle
            toolbar
          </rg-sidebar-toggle-button>
        </div>
      </rg-table-toolbar>

      <rg-table items="ctrl.itemsArray" selection="ctrl.selection">
        <rg-table-header class="example__table-header"
          stick-to=".some-toolbar">
          <rg-table-title>Avatar</rg-table-title>
          <rg-table-title>Check</rg-table-title>
          <rg-table-title active>Name</rg-table-title>
          <rg-table-title></rg-table-title>
        </rg-table-header>

        <rg-table-row row-item="item" ng-repeat="item in ctrl.itemsArray">
          <rg-table-column avatar>
            <img ng-if="::item.iconUrl" ng-src="{{ ::item.iconUrl }}"
              class="ring-table__avatar__img"/>
          </rg-table-column>
          <rg-table-checkbox-cell></rg-table-checkbox-cell>
          <rg-table-column limited>{{::item.name }}</rg-table-column>
          <rg-table-column>
            <rg-sidebar-toggle-button ng-show="item.active"
              model="ctrl.isShowSideBar"></rg-sidebar-toggle-button>
          </rg-table-column>
        </rg-table-row>
      </rg-table>
    </div>
  </file>
  <file type="js">
    require('angular');
    require('ring-ui/components/table-ng/table-ng');
    require('ring-ui/components/select-ng/select-ng');
    require('ring-ui/components/sidebar-ng/sidebar-ng');
    var reactNg = require('ring-ui/components/react-ng/react-ng');
    var registerComponents = reactNg.registerComponents;
    var QueryAssist = require('ring-ui/components/query-assist/query-assist');
    registerComponents({QueryAssist});

    angular.module('test', ['Ring.table', 'Ring.sidebar', 'Ring.select', reactNg.reactNg]).
      controller('tableExample', function ($timeout, $scope) {
        var ctrl = this;

        ctrl.query = 'fooo'

        ctrl.isShowSideBar = true;

        $timeout(function () {
          ctrl.itemsArray = [{
            name: 'test1',
            iconUrl: 'https://d13yacurqjgara.cloudfront.net/users/317408/avatars/mini/Layout_Behance_Avatar_(1).jpg?1376382552'
          }];
          for (var i = 0; i < 20; i++) {
            ctrl.itemsArray.push({name: Math.random()});
          }
        }, 500);

        ctrl.queryAssistSource = function (query, caret, omitSuggestions) {
          return {
            caret: caret,
            query: query,
            styleRanges: omitSuggestions ? [{
              start: 0,
              length: 1,
              style: 'text'
            }] : [],
            suggestions: [{
              prefix: 'login: ',
              option: 'test',
              suffix: ' ',
              description: 'logins',
              matchingStart: 0,
              matchingEnd: 4,
              caret: 2,
              completionStart: 0,
              completionEnd: 4,
              group: 'logins',
              icon: 'data:uri'
            }]
          };
        };


      });
  </file>
  <file name="index.scss">
    body {
    margin: 0;
    }
  </file>
</example>
