<example name="Confirm">
  <file type="html">
    <div id="confirm"></div>
  </file>

  <file type="js">
    import {render} from 'react-dom';
    import React from 'react';
    import Confirm from 'ring-ui/components/confirm/confirm';
    import Button from 'ring-ui/components/button-legacy/button-legacy';

    class ConfirmDemo extends React.Component {
      state = {
        confirm: {
          show: true,
          text: 'Do you really want to proceed?',
          description: 'Confirm description',
          onConfirm: () => {},
          onReject: () => {}
        }
      };

      componentDidMount() {
        this.showConfirm();
      }

      hideConfirm = () => {
        this.setState({confirm: {show: false}});
      }

      showConfirm = () => {
        return new Promise((resolve, reject) => {
          this.setState({
            confirm: {
              show: true,
              text: 'Do you really want to proceed?',
              description: 'Confirm description',
              onConfirm: () => this.hideConfirm() || resolve(),
              onReject: () => this.hideConfirm() || reject()
            }
          });
        }).
          then(() => console.info('Confirmed')).
          catch(() => console.warn('Rejected'));
      }

      showWithAnotherText = () => {
        return new Promise((resolve, reject) => {
          this.setState({
            confirm: {
              show: true,
              text: 'There is another question',
              onConfirm: () => this.hideConfirm() || resolve(),
              onReject: () => this.hideConfirm() || reject()
            }
          });
        }).
          then(() => console.info('Confirmed')).
          catch(() => console.warn('Rejected'));
      }

      render() {
        return (
        <div>
          <div>
            <Button onClick={this.showConfirm}>Show confirm</Button>
          </div>
          <div>
            <Button onClick={this.showWithAnotherText}>Show another message</Button>
          </div>
          <Confirm
            show={this.state.confirm.show}
            text={this.state.confirm.text}
            description={this.state.confirm.description}
            confirmText="OK, continue"
            rejectText="No, cancel"
            onConfirm={this.state.confirm.onConfirm}
            onReject={this.state.confirm.onReject}
          />
        </div>
        );
      }
     }

    render(<ConfirmDemo/>, document.getElementById('confirm'));
  </file>
</example>
