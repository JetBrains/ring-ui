@import "../global/global";
@import "../progress-bar/progress-bar";
@import "./btn";

@mixin button-background($dark, $light) {
  background-image: linear-gradient(to top, #{$dark}, #{$light});
}

@mixin button-shadow-normal($color) {
  box-shadow: inset 0 -2px 0 -1px $color;
}

@mixin button-shadow-hover($color) {
  box-shadow: inset 0 0 0 1px $color;
}

@mixin button-shadow-active($color) {
  box-shadow: inset 0 2px 0 -1px $color;
}

.ring-button {
  @include ring-font(12px);
  @include button-background(#f0f0f0, #fff);

  color: #444;

  position: relative;
  z-index: 0;
  vertical-align: middle;

  height: $ring-unit*3;
  padding: 0 $ring-unit*2;
  outline: 0;

  border: 0;
  border-radius: $ring-border-radius;
  box-shadow: inset 0 0 0 1px #ccc;

  cursor: default;

  &:focus:not([disabled]):not(.ring-button_loader) {
    box-shadow: 0 0 0 2px rgba(37, 183, 255, 0.5) !important;
    z-index: 3;
  }

  &[disabled] {
    opacity: 0.5;
  }

  &:hover:not([disabled]):not(.ring-button_loader) {
    @include button-background(#e9e9e9, #fff);
    @include button-shadow-hover(#aaa);
    z-index: 1;
  }

  &:active:not([disabled]):not(.ring-button_loader),
  &.ring-button_active:not([disabled]):not(.ring-button_loader) {
    background: #e9f8ff;
    box-shadow: inset 0 0 0 1px #25b7ff, inset 0 0 2px 1px rgba(3, 116, 172, 0.5);
    z-index: 2;
  }

  &:active:focus:not([disabled]):not(.ring-button_loader),
  &.ring-button_active:focus:not([disabled]):not(.ring-button_loader) {
    box-shadow: 0 0 0 2px rgba(37, 183, 255, 0.5), inset 0 1px 2px 1px rgba(0, 0, 0, 0.1) !important;
  }

  .ring-icon {
    color: $ring-dark-gray-color;
  }
}

.ring-button__icon {
  display: none;
}

.ring-button_icon .ring-button__icon {
  display: inline-block;
}

.ring-button::-moz-focus-inner {
  outline: 0;
  border: 0;
}

.ring-button_loader {
  &[disabled] {
    opacity: 1;
  }
}

.ring-button_icon .ring-button__content {
  vertical-align: middle;
}

.ring-button_primary {
  @include button-background(#ff5a00, #ff8543);
  @include button-shadow-normal(#cc4902);
  color: #fff;

  &:hover:not([disabled]):not(.ring-button_loader) {
    @include button-background(#ff5a00, #ff9f6b);
    @include button-shadow-hover(#cc4902);
  }

  &:active:not([disabled]):not(.ring-button_loader),
  &.ring-button_active:not([disabled]):not(.ring-button_loader) {
    @include button-background(#ff8543, #ff5a00);
    @include button-shadow-active(#cc4902);
  }

  .ring-icon {
    color: #fff;
  }
}

.ring-button_blue {
  @include button-background(#0084ff, #25b7ff);
  @include button-shadow-normal(#015099);
  color: #fff;

  &:hover:not([disabled]):not(.ring-button_loader) {
    @include button-background(#0084ff, #5bc9ff);
    @include button-shadow-hover(#0077e5);
  }

  &:active:not([disabled]):not(.ring-button_loader),
  &.ring-button_active:not([disabled]):not(.ring-button_loader) {
    @include button-background(#25b7ff, #0084ff);
    @include button-shadow-active(#0077e5);
  }

  .ring-icon {
    color: #fff;
  }
}

.ring-button_delayed {
  .ring-button__content {
    &:after {
      content: 'â€¦';
    }
  }
}

.ring-button_danger {
  color: $ring-error-color;

  .ring-icon {
    color: inherit;
  }
}

.ring-button_short {
  width: 4*$ring-unit;
  padding: 0;
}

.ring-button__loader {
  display: none;
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  margin-bottom: 0;
  max-width: none;
  background-color: transparent;

  .ring-progress-bar__i {
    &:after {
      background-repeat: repeat;
      /*background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="5" height="5"><style>line { stroke: rgba(255, 255, 255, 0.6) }</style><line x1="0" y1="5" x2="5" y2="0" /><line x1="-1" y1="1" x2="1" y2="-1" /><line x1="4" y1="6" x2="6" y2="4" /></svg>');*/
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPjxzdHlsZT5saW5lIHsgc3Ryb2tlOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNikgfTwvc3R5bGU+PGxpbmUgeDE9IjAiIHkxPSI1IiB4Mj0iNSIgeTI9IjAiIC8+PGxpbmUgeDE9Ii0xIiB5MT0iMSIgeDI9IjEiIHkyPSItMSIgLz48bGluZSB4MT0iNCIgeTE9IjYiIHgyPSI2IiB5Mj0iNCIgLz48L3N2Zz4=");
    }
  }
}

.ring-button_loader .ring-button__loader {
  display: block;
}

.ring-button_loader.ring-button_default .ring-button__loader {
  .ring-progress-bar__i {
    &:after {
      /*background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="5" height="5"><style>line { stroke: rgba(204, 204, 204, 0.6) }</style><line x1="0" y1="5" x2="5" y2="0" /><line x1="-1" y1="1" x2="1" y2="-1" /><line x1="4" y1="6" x2="6" y2="4" /></svg>');*/
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPjxzdHlsZT5saW5lIHsgc3Ryb2tlOiByZ2JhKDIwNCwgMjA0LCAyMDQsIDAuNikgfTwvc3R5bGU+PGxpbmUgeDE9IjAiIHkxPSI1IiB4Mj0iNSIgeTI9IjAiIC8+PGxpbmUgeDE9Ii0xIiB5MT0iMSIgeDI9IjEiIHkyPSItMSIgLz48bGluZSB4MT0iNCIgeTE9IjYiIHgyPSI2IiB5Mj0iNCIgLz48L3N2Zz4=");
    }
  }
}

.ring-button-toolbar {
  display: inline-block;
  font-size: 0;
  white-space: nowrap;

  &.ring-button-toolbar_block {
    display: block;
  }

  &__label {
    font-size: $ring-font-size;
  }
}

.ring-button-toolbar > .ring-button,
.ring-button-toolbar > .ring-button-toolbar,
.ring-button-toolbar > .ring-button-toolbar__label,
.ring-button-toolbar > .ring-button-group {
  margin-right: 16px;

  &:last-child {
    margin-right: 0;
  }
}
