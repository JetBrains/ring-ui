<example name="Auth">
  <file type="html">
    <div id="example">
    </div>
  </file>

  <file type="js">
    import Auth from 'ring-ui/components/auth/auth';
    import hubConfig from 'ring-ui/site/hub-config';
    // Example config:
    // var hubConfig = {
    //   serverUri: 'https://hub.jetbrains.com/',
    //   client_id: '81a0bffb-6d0f-4a38-b93a-0a4d1e567698',
    //   request_credentials: 'skip',
    //   redirect_uri: window.location.href.split('#')[0]
    // };

    const log = function (title, obj) {
      const titleElem = document.createElement('h3');
      const jsonElem = document.createElement('div');

      titleElem.innerHTML = title;
      jsonElem.innerHTML = JSON.stringify(obj);

      document.getElementById('example').appendChild(titleElem);
      document.getElementById('example').appendChild(jsonElem);
    };

    (async auth => {
      try {
        const location = await auth.init();
        log('location to restore', location)
        const token = await auth.requestToken();
        log('token', token);
        const data = await auth.requestUser();
        log('user profile data', data);
      } catch (e) {
        log('error', e);
      }
    })(new Auth(hubConfig));
  </file>
</example>
