package patches.projects

import jetbrains.buildServer.configs.kotlin.v2018_2.*
import jetbrains.buildServer.configs.kotlin.v2018_2.Project
import jetbrains.buildServer.configs.kotlin.v2018_2.projectFeatures.buildReportTab
import jetbrains.buildServer.configs.kotlin.v2018_2.ui.*

/*
This patch script was generated by TeamCity on settings change in UI.
To apply the patch, change the root project
accordingly, and delete the patch script.
*/
changeProject(DslContext.projectId) {
    params {
        expect {
            param("env.PUPPETEER_SKIP_CHROMIUM_DOWNLOAD", "true")
        }
        update {
            text("env.PUPPETEER_SKIP_CHROMIUM_DOWNLOAD", "true", allowEmpty = true)
        }
    }

    features {
        add {
            buildReportTab {
                id = "PROJECT_EXT_156"
                title = "Yarn audit"
                startPage = "yarn-audit.html"
            }
        }
        add {
            feature {
                type = "Invitation"
                id = "PROJECT_EXT_346"
                param("createdByUserId", "7441")
                param("invitationType", "joinProjectInvitation")
                param("roleId", "PROJECT_ADMIN")
                param("secure:token", "credentialsJSON:49ae2465-4363-4742-8ad6-416b1470f807")
                param("name", "Join project administration")
                param("welcomeText", "Andrey Skladchikov invites you to join the JetBrains Public Projects / JetBrains UI / Ring UI project")
                param("disabled", "false")
                param("multi", "true")
            }
        }
    }

    expectBuildTypesOrder(RelativeId("GeminiTests"), RelativeId("UnitTestsAndBuild"), RelativeId("Publish"), RelativeId("Publish10hotfix"), RelativeId("Deploy"), RelativeId("PublishToGitHubPages"), RelativeId("GeneratorE2eTest"), RelativeId("PublishNext"), RelativeId("UnpublishSpecificVersion"), RelativeId("PublishCanary"), RelativeId("AllChecks"))
    buildTypesOrderIds = arrayListOf(RelativeId("GeminiTests"), RelativeId("UnitTestsAndBuild"), RelativeId("Publish"), RelativeId("Deploy"), RelativeId("PublishToGitHubPages"), RelativeId("GeneratorE2eTest"), RelativeId("PublishNext"), RelativeId("UnpublishSpecificVersion"), RelativeId("PublishCanary"), RelativeId("AllChecks"))
}
